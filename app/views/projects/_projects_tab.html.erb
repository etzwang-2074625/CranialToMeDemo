<div class='panel-padding bg-white'>
  <table class='table table-borderless' id='<%= "#{project_table_id}"%>' >
    <thead>
      <tr>
        <th style='width: auto' tabindex="0">Award Number</th>
        <th style='width: 20%;' tabindex="0">Project Title</th>
        <th style='width: 10%; 'tabindex="0">Contact PI</th>
        <th style='width: auto;' tabindex="0">Project Start-End Date</th>
        <th style='width: auto;' tabindex="0">DMS Plan File</th>
        <th style='width: 10%;' tabindex="0">DMS Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
    <% projects.each do |f| %>
      <tr>
        <td tabindex="0"><%= f.project_number %></td>
        <td tabindex="0"><%= f.project_title %></td>
        <td tabindex="0"><%= f.contact_pi %></td>
        <td tabindex="0"><%= f.project_start_date.nil? ? "" : "#{f.project_start_date.strftime("%m/%d/%Y")}" %> - <%= f.project_end_date.nil? ? "" : "#{f.project_end_date.strftime("%m/%d/%Y")}" %></td>
        <td>
          <% if f.dms_plan_file.present? %>
            <%= link_to "<i class='fa fa-file-pdf-o'></i>".html_safe, print_dms_plan_project_path(id: f.id), target: '_blank' %>
          <% end %>
        </td>
        <td>
          <span class='badge badge-<%= f.dms_status == 1 ? 'primary' : 'warning' %>' style="font-size:1rem;"><%= f.dms_status_description.titleize %></span>
        </td>
        <td tabindex="0">
          <div class='btn-group btn-group-sm'>
            <%= link_to "<i class='fa fa-pencil'></i>".html_safe, edit_project_path(f), class: 'btn btn-outline-primary btn-sm', "aria-label" => "Edit Award"%>
            <% if f.rpprs.size > 0 %>
              <%= link_to "Show/Hide DMS progress report".html_safe,
                          rpprs_path(project_id: f.id),
                          id: "openRpprBtn_#{f.id}",
                          remote: true, class: "btn btn-outline-primary btn-sm" %>
            <% end %>
            <%= link_to "<i class='fa fa-plus'></i> DMS progress report".html_safe, new_rppr_user_path(id: current_user.id, project_id: f.id), class: 'btn btn-outline-success btn-sm', "aria-label" => "Add DMS progress report"%>
            <%= link_to "<i class='fa fa-trash'></i>".html_safe, project_path(id: f.id), class: 'btn btn-outline-danger btn-sm', data: {confirm: 'Are you sure?'}, method: 'DELETE' %>
          </div>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>

<script>
  $('#' + '<%= "#{project_table_id}"%>').DataTable({stateSave: true, autoWidth: false, columnDefs: [ { orderable: false, targets: [-1] }]});
</script>